<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏ªÈ†ÖËÆäÊèõÊ∏¨È©ó (Á∑¥ÁøíÁâà)</title>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif:wght@400;700&display=swap');
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --correct-color: #27ae60;
            --wrong-color: #e74c3c;
            --example-bg: #fffbf0;
            --note-color: #f39c12;
            
            /* Keypad colors */
            --key-bg: #ffffff;
            --key-border: #bdc3c7;
            --key-text: #2c3e50;
            --key-hover: #ecf0f1;
            --key-var-bg: #e8f6f3;
            --key-var-border: #a3e4d7;
            --key-op-bg: #d6eaf8;
            --key-op-border: #aed6f1;
            --key-action-bg: #fdedec;
            --key-action-border: #fadbd8;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f9f9f9;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23bdc3c7' fill-opacity='0.15'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .question-card, .example-card {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 5px solid var(--secondary-color);
            background-color: white;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%233498db' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .question-card:hover, .example-card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            color: white;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
            color: white;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            z-index: 10;
            position: relative;
        }
        
        .btn-secondary:hover {
            background-color: #6c7a7d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(127, 140, 141, 0.4);
        }
        
        .btn-secondary:active {
            transform: translateY(0);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .answer-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #bdc3c7;
            border-radius: 0.375rem;
            font-family: 'Noto Serif', serif;
            background-color: #f8f9fa; /* Slightly gray to indicate readonly but active */
            font-size: 1.25rem;
            transition: all 0.3s;
            cursor: text;
        }
        
        .answer-input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25);
            outline: none;
            background-color: white;
        }
        
        .answer-input::placeholder {
            color: #95a5a6;
            opacity: 1;
        }
        
        .answer-preview {
            min-height: 50px;
            border: 2px solid #bdc3c7;
            border-radius: 0.375rem;
            padding: 0.75rem;
            margin-top: 0.75rem;
            background-color: #fff;
            position: relative;
            font-family: 'Noto Serif', serif;
            font-size: 1.1rem;
        }
        
        .preview-label {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #bdc3c7;
            color: white;
            font-size: 0.75rem;
            padding: 0.125rem 0.375rem;
            border-radius: 0 0.25rem 0 0.25rem;
        }
        
        .start-screen {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .start-screen::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M50 0l10 20H40L50 0zm0 100l10-20H40l10 20zM0 50l20 10V40L0 50zm100 0l-20 10V40l20 10zM10 0l10 20H0L10 0zm10 100l10-20H0l10 20zM90 0l10 20H80L90 0zm10 100l10-20H80l10 20z'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .math-symbols {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 1;
        }
        
        .math-symbol {
            position: absolute;
            color: rgba(255, 255, 255, 0.2);
            font-family: 'Noto Serif', serif;
            font-weight: bold;
            user-select: none;
            pointer-events: none;
        }
        
        .start-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 2rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 1rem;
            backdrop-filter: blur(5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 90%;
            width: 500px;
        }
        
        .start-btn {
            background-color: white;
            color: var(--secondary-color);
            font-weight: bold;
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            font-size: 1.25rem;
            transition: all 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border: none;
            cursor: pointer;
            z-index: 10;
            display: block;
            width: 100%;
            margin-bottom: 1rem;
        }

        .start-btn.secondary {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .start-btn.secondary:hover {
            background-color: rgba(255, 255, 255, 0.3);
            border-color: white;
        }
        
        .start-btn:active {
            transform: translateY(-1px);
        }
        
        .start-btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .start-btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .mjx-chtml {
            display: inline-block !important;
        }
        
        .hint-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0 0.375rem 0.375rem 0;
            position: relative;
        }
        
        .hint-box::before {
            content: "üí°";
            position: absolute;
            left: -12px;
            top: -12px;
            background-color: var(--secondary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .question-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            justify-content: center;
        }
        
        .question-nav-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            border: 2px solid #bdc3c7;
            background-color: white;
            position: relative;
            overflow: hidden;
        }
        
        .question-nav-btn:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .question-nav-btn.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
            font-weight: bold;
        }
        
        .question-nav-btn.answered {
            background-color: #d6eaf8;
            border-color: var(--secondary-color);
        }
        
        .question-nav-btn.active.answered {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .question-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background-color: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .example-number {
            background-color: var(--note-color);
        }
        
        .question-title {
            font-family: 'Noto Serif', serif;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
        }
        
        .question-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--secondary-color);
        }
        
        .nav-buttons {
            position: relative;
        }
        
        .nav-buttons::before {
            content: "";
            position: absolute;
            top: -20px;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(52, 152, 219, 0.5), transparent);
        }
        
        .result-card {
            border-radius: 0.5rem;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .result-header {
            padding: 1rem;
            color: white;
        }
        
        .result-correct .result-header {
            background-color: var(--correct-color);
        }
        
        .result-wrong .result-header {
            background-color: var(--wrong-color);
        }
        
        .result-body {
            padding: 1rem;
            background-color: white;
        }
        
        .result-label {
            font-weight: 500;
            color: var(--dark-color);
            margin-bottom: 0.25rem;
        }
        
        .result-answer {
            background-color: #f8f9fa;
            padding: 0.5rem;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }
        
        .score-display {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .score-display::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M50 0l10 20H40L50 0zm0 100l10-20H40l10 20zM0 50l20 10V40L0 50zm100 0l-20 10V40l20 10zM10 0l10 20H0L10 0zm10 100l10-20H0l10 20zM90 0l10 20H80L90 0zm10 100l10-20H80l10 20z'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .score-number {
            font-size: 3rem;
            font-weight: bold;
            font-family: 'Noto Serif', serif;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .retry-btn {
            background-color: var(--primary-color);
            color: white;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .retry-btn:hover {
            background-color: #1a2530;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 62, 80, 0.4);
        }
        
        .retry-btn:active {
            transform: translateY(0);
        }

        /* Ê≠•È©üÊ®£Âºè */
        .step-row {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            border-bottom: 1px dashed #e0e0e0;
            padding-bottom: 0.5rem;
        }

        .step-row:last-child {
            border-bottom: none;
        }

        .step-math {
            font-size: 1.1rem;
            line-height: 1.6;
            flex-grow: 1;
            padding-right: 1rem;
            overflow-x: auto;
        }

        .step-note {
            background-color: #fff8e1;
            color: #d35400;
            font-size: 0.85rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            border: 1px solid #ffe0b2;
            white-space: nowrap;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
        }

        .step-note::before {
            content: "üí°";
            margin-right: 5px;
            font-size: 0.8rem;
        }

        /* ÈçµÁõ§Ê®£Âºè */
        .keypad-container {
            background-color: #f1f2f6;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-top: 1rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid #e0e0e0;
        }
        
        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.35rem;
            width: 100%;
        }
        
        .key-btn {
            background-color: var(--key-bg);
            border: 1px solid var(--key-border);
            border-radius: 0.375rem;
            padding: 0.75rem 0;
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 500;
            color: var(--key-text);
            cursor: pointer;
            transition: all 0.1s;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.1rem;
            height: 48px;
            box-shadow: 0 2px 0 rgba(0,0,0,0.05);
        }
        
        .key-btn:hover {
            transform: translateY(-1px);
            background-color: var(--key-hover);
        }
        
        .key-btn:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        
        .key-btn-var {
            font-family: 'Noto Serif', serif;
            font-style: italic;
            background-color: var(--key-var-bg);
            border-color: var(--key-var-border);
            color: #16a085;
            font-weight: bold;
        }
        
        .key-btn-op {
            background-color: var(--key-op-bg);
            border-color: var(--key-op-border);
            color: #2980b9;
        }
        
        .key-btn-action {
            background-color: var(--key-action-bg);
            border-color: var(--key-action-border);
            color: #c0392b;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        /* Mobile adjustment for keypad */
        @media (max-width: 640px) {
            .keypad-grid {
                gap: 0.25rem;
            }
            .key-btn {
                height: 44px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- ÈñãÂßãÁï´Èù¢ (È†êË®≠È°ØÁ§∫) -->
    <div id="start-screen" class="start-screen">
        <div class="math-symbols" id="math-symbols"></div>
        <div class="start-content">
            <h1 class="text-4xl font-bold mb-4">‰∏ªÈ†ÖËÆäÊèõÊ∏¨È©ó</h1>
            <p class="text-xl mb-8">È¶ôÊ∏Ø‰∏≠Â≠∏ÊñáÊÜëË©¶_Âç∑‰∏ÄÈ°åÂûã</p>
            <button id="start-quiz-btn" class="start-btn">
                ÈñãÂßãÊ∏¨È©ó
            </button>
            <button id="view-examples-btn" class="start-btn secondary">
                Êü•Èñ±‰æãÈ°å
            </button>
        </div>
    </div>

    <!-- Ê∏¨È©ó‰∏ª‰ªãÈù¢ -->
    <div id="main-container" class="container mx-auto px-4 py-8 max-w-4xl hidden">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-primary-color">‰∏ªÈ†ÖËÆäÊèõÊ∏¨È©ó</h1>
            <p class="text-gray-600 mt-2">È¶ôÊ∏Ø‰∏≠Â≠∏ÊñáÊÜëË©¶_Âç∑‰∏ÄÈ°åÂûã</p>
        </header>
        
        <div id="quiz-container">
            <!-- È°åÁõÆÂ∞éËà™ -->
            <div class="question-nav" id="question-nav">
                <!-- ÂãïÊÖãÁîüÊàêÈ°åÁõÆÂ∞éËà™ÊåâÈàï -->
            </div>
            
            <div id="question-container" class="question-card rounded-lg p-6">
                <!-- È°åÁõÆÂÖßÂÆπÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
            </div>
            
            <div class="mt-8 flex justify-between nav-buttons">
                <button id="prev-question" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ä‰∏ÄÈ°å
                </button>
                <button id="next-question" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ã‰∏ÄÈ°å
                </button>
                <button id="submit-quiz" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg hidden">
                    Êèê‰∫§Ê∏¨È©ó
                </button>
            </div>
            
            <div class="mt-4 text-center">
                <span id="question-progress" class="text-gray-600">Á¨¨ 1 È°å / ÂÖ± 10 È°å</span>
            </div>
        </div>
        
        <div id="results-container" class="mt-8 hidden">
            <div class="score-display mb-8">
                <h2 class="text-2xl font-bold mb-4">Ê∏¨È©óÁµêÊûú</h2>
                <div class="score-number"><span id="score">0</span> / 10</div>
            </div>
            <div id="detailed-results" class="space-y-6"></div>
            <div class="mt-8 text-center">
                <button id="retry-quiz" class="retry-btn px-6 py-3 rounded-lg font-medium text-lg">
                    ÈáçÊñ∞Ê∏¨È©ó
                </button>
            </div>
        </div>
    </div>

    <!-- ‰æãÈ°åÂ±ïÁ§∫‰ªãÈù¢ -->
    <div id="examples-container" class="container mx-auto px-4 py-8 max-w-4xl hidden">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-primary-color">‰∏ªÈ†ÖËÆäÊèõ - ‰æãÈ°åÁ§∫ÁØÑ</h1>
            <p class="text-gray-600 mt-2">Ë©≥Á¥∞Ê≠•È©üËß£Ë™™</p>
        </header>
        
        <div id="example-card-container" class="example-card rounded-lg p-6">
            <!-- ‰æãÈ°åÂÖßÂÆπÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
        </div>

        <div class="mt-8 flex justify-between nav-buttons">
            <button id="prev-example" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg">
                ‰∏ä‰∏Ä‰æã
            </button>
            <div class="flex gap-2">
                 <button id="back-to-menu" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg bg-gray-500 hover:bg-gray-600">
                    ËøîÂõûÁõÆÈåÑ
                </button>
                <button id="next-example" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ã‰∏Ä‰æã
                </button>
            </div>
        </div>

        <div class="mt-4 text-center">
            <span id="example-progress" class="text-gray-600">‰æãÈ°å 1 / 10</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÂÖ®Â±ÄËÆäÈáè
            let questions = [];
            let currentQuestionIndex = 0;
            let currentExampleIndex = 0;
            let userAnswers = [];
            
            // Âõ∫ÂÆö‰æãÈ°åÊï∏Êìö (10È°å) - Ê†πÊìö PDF
            const examples = [
                {
                    id: 1,
                    question: "\\text{‰ª§ } a \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{3a+b}{8}=b-1 \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{3a+b}{8}=b-1",
                    steps: [
                        { math: "3a+b=8(b-1)", note: "ÁßªÈ†Ö" },
                        { math: "3a+b=8b-8", note: "Â±ïÈñã" },
                        { math: "3a=7b-8", note: "Áµ¶Â∞á a ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "a=\\frac{7b-8}{3}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 2,
                    question: "\\text{‰ª§ } k \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{3}{h}-\\frac{1}{k}=2 \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{3}{h}-\\frac{1}{k}=2",
                    steps: [
                        { math: "(\\frac{3}{h}-\\frac{1}{k})hk=2hk", note: "ÂÖ®Âºè‰πò‰ª• hk" },
                        { math: "3k-h=2hk", note: "Â±ïÈñãÂèäÂåñÁ∞°" },
                        { math: "3k-2hk=h", note: "Áµ¶Â∞á k ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "k(3-2h)=h", note: "ÊèêÂèñÂÖ¨Âõ†Âºè" },
                        { math: "k=\\frac{h}{3-2h}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 3,
                    question: "\\text{ËÄÉÊÖÆÂÖ¨Âºè } 2(3m+n)=m+7 \\text{„ÄÇ‰ª§ } n \\text{ ÊàêÁÇ∫‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "2(3m+n)=m+7",
                    steps: [
                        { math: "6m+2n=m+7", note: "Â±ïÈñã" },
                        { math: "2n=m-6m+7", note: "ÁßªÈ†Ö" },
                        { math: "2n=7-5m", note: "ÂåñÁ∞°" },
                        { math: "n=\\frac{7-5m}{2}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 4,
                    question: "\\text{‰ª§ } b \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{4a+5b-7}{b}=8 \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{4a+5b-7}{b}=8",
                    steps: [
                        { math: "4a+5b-7=8b", note: "ÁßªÈ†Ö" },
                        { math: "4a-7=8b-5b", note: "Áµ¶Â∞á b ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "4a-7=3b", note: "ÂåñÁ∞°" },
                        { math: "b=\\frac{4a-7}{3}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 5,
                    question: "\\text{‰ª§ } x \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } Ax=(4x+B)C \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "Ax=(4x+B)C",
                    steps: [
                        { math: "Ax=4Cx+BC", note: "Â±ïÈñã" },
                        { math: "Ax-4Cx=BC", note: "Áµ¶Â∞á x ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "(A-4C)x=BC", note: "ÊèêÂèñÂÖ¨Âõ†Âºè" },
                        { math: "x=\\frac{BC}{A-4C}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 6,
                    question: "\\text{‰ª§ } y \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } k=\\frac{3x-y}{y} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "k=\\frac{3x-y}{y}",
                    steps: [
                        { math: "ky=3x-y", note: "ÁßªÈ†Ö" },
                        { math: "ky+y=3x", note: "Áµ¶Â∞á y ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "y(k+1)=3x", note: "ÊèêÂèñÂÖ¨Âõ†Âºè" },
                        { math: "y=\\frac{3x}{k+1}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 7,
                    question: "\\text{‰ª§ } b \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{a+4}{3}=\\frac{b+1}{2} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{a+4}{3}=\\frac{b+1}{2}",
                    steps: [
                        { math: "2(a+4)=3(b+1)", note: "‰∫§ÂèâÁõ∏‰πò" },
                        { math: "2a+8=3b+3", note: "Â±ïÈñã" },
                        { math: "3b=2a+5", note: "Áµ¶Â∞á b ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "b=\\frac{2a+5}{3}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 8,
                    question: "\\text{‰ª§ } h \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } 9(h+6k)=7h+8 \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "9(h+6k)=7h+8",
                    steps: [
                        { math: "9h+54k=7h+8", note: "Â±ïÈñã" },
                        { math: "9h-7h=8-54k", note: "Áµ¶Â∞á h ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "2h=8-54k", note: "ÂåñÁ∞°" },
                        { math: "h=4-27k", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 9,
                    question: "\\text{‰ª§ } a \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{4-3a}{b}=5 \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{4-3a}{b}=5",
                    steps: [
                        { math: "4-3a=5b", note: "ÁßªÈ†Ö" },
                        { math: "4-5b=3a", note: "Áµ¶Â∞á a ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "a=\\frac{4-5b}{3}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                },
                {
                    id: 10,
                    question: "\\text{‰ª§ } h \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{5}{h+k}=\\frac{k}{h-3} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}",
                    questionMath: "\\frac{5}{h+k}=\\frac{k}{h-3}",
                    steps: [
                        { math: "5(h-3)=k(h+k)", note: "‰∫§ÂèâÁõ∏‰πò" },
                        { math: "5h-15=hk+k^2", note: "Â±ïÈñã" },
                        { math: "5h-hk=15+k^2", note: "Áµ¶Â∞á h ÊîæÂú®‰∏ÄÈÇä" },
                        { math: "h(5-k)=15+k^2", note: "ÊèêÂèñÂÖ¨Âõ†Âºè" },
                        { math: "h=\\frac{15+k^2}{5-k}", note: "ÊàñÁ≠âÂÉπ" }
                    ]
                }
            ];

            // ÂâµÂª∫Êï∏Â≠∏Á¨¶ËôüËÉåÊôØ
            createMathSymbols();
            
            // ÊåâÈàï‰∫ã‰ª∂Áõ£ËÅΩÂô®
            
            document.getElementById('start-quiz-btn').addEventListener('click', function() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('main-container').classList.remove('hidden');
                initQuiz();
            });

            document.getElementById('view-examples-btn').addEventListener('click', function() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('examples-container').classList.remove('hidden');
                currentExampleIndex = 0;
                renderCurrentExample();
            });

            document.getElementById('back-to-menu').addEventListener('click', function() {
                document.getElementById('examples-container').classList.add('hidden');
                document.getElementById('start-screen').classList.remove('hidden');
            });

            document.getElementById('next-question').addEventListener('click', function() {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    renderCurrentQuestion();
                    renderQuestionNav();
                }
            });
            
            document.getElementById('prev-question').addEventListener('click', function() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderCurrentQuestion();
                    renderQuestionNav();
                }
            });

            document.getElementById('next-example').addEventListener('click', function() {
                if (currentExampleIndex < examples.length - 1) {
                    currentExampleIndex++;
                    renderCurrentExample();
                }
            });

            document.getElementById('prev-example').addEventListener('click', function() {
                if (currentExampleIndex > 0) {
                    currentExampleIndex--;
                    renderCurrentExample();
                }
            });
            
            document.getElementById('submit-quiz').addEventListener('click', function() {
                showResults();
            });
            
            document.getElementById('retry-quiz').addEventListener('click', function() {
                const quizContainer = document.getElementById('quiz-container');
                const resultsContainer = document.getElementById('results-container');
                
                resultsContainer.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                
                initQuiz();
            });
            
            function createMathSymbols(containerId = 'math-symbols') {
                const symbols = ['‚à´', '‚àë', '‚àè', 'œÄ', '‚àö', '‚àû', 'Œ∏', 'Œî', '‚àá', 'Œª', 'Œ±', 'Œ≤', 'Œ≥', 'œÜ', 'œâ', '‚â†', '‚âà', '‚â§', '‚â•', '‚àà', '‚àâ', '‚äÇ', '‚äÉ', '‚à™', '‚à©', '‚àÄ', '‚àÉ', '‚àÑ', '‚à¥', '‚àµ', '‚áí', '‚áî', '‚àÇ', '‚à´', '‚à¨', '‚à≠', '‚àÆ', '‚àØ', '‚à∞', '‚àá', '‚àÜ', '‚àÇ'];
                const container = document.getElementById(containerId);
                
                if (!container) return;
                
                container.innerHTML = '';
                
                for (let i = 0; i < 50; i++) {
                    const symbol = document.createElement('div');
                    symbol.className = 'math-symbol';
                    symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    const size = Math.random() * 30 + 20;
                    const rotation = Math.random() * 360;
                    symbol.style.left = `${x}%`;
                    symbol.style.top = `${y}%`;
                    symbol.style.fontSize = `${size}px`;
                    symbol.style.transform = `rotate(${rotation}deg)`;
                    container.appendChild(symbol);
                }
            }
            
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            
            // ÊúÄÂ§ßÂÖ¨Âõ†Êï∏ÂáΩÊï∏
            function gcd(a, b) {
                a = Math.abs(a);
                b = Math.abs(b);
                while (b) {
                    var t = b;
                    b = a % b;
                    a = t;
                }
                return a;
            }

            // ËºîÂä©ÂáΩÊï∏ÔºöÁîüÊàêÂàÜÊï∏ÁöÑÊâÄÊúâÂêàÊ≥ïËÆäÈ´î
            function generateFractionVariations(numeratorVariants, denominatorVariants) {
                const answers = [];
                
                numeratorVariants.forEach(n => {
                    denominatorVariants.forEach(d => {
                        // LaTeX ÂΩ¢Âºè
                        answers.push(`\\frac{${n}}{${d}}`);
                        // Inline ÂΩ¢Âºè (Âö¥Ê†ºÊã¨Ëôü)
                        answers.push(`(${n})/(${d})`);
                        // Â¶ÇÊûúÂàÜÊØçÊòØÁ∞°ÂñÆÊï∏Â≠óÊàñÂñÆ‰∏ÄËÆäÊï∏ÔºåÂÖÅË®±ÁúÅÁï•ÂàÜÊØçÊã¨Ëôü
                        if (!d.includes('+') && !d.includes('-')) {
                            answers.push(`(${n})/${d}`);
                        }
                    });
                });
                
                return answers;
            }

            // Êñ∞Â¢ûËºîÂä©ÂáΩÊï∏ÔºöÁîüÊàêÊì¥Â±ïËÆäÈ´îÔºàÂåÖÂê´ÂàÜËß£ÂΩ¢ÂºèÂíåÂ∞èÊï∏ÂΩ¢ÂºèÔºâ
            // ÂΩ¢Â¶Ç (coeff*var + constant) / divisor
            function generateExpandedVariations(coeff, variable, constant, divisor) {
                const results = [];
                
                // 1. ÊèêÂèñÂÖ¨Âõ†ÂºèÂΩ¢Âºè: k(ax + b)/d
                const common = gcd(coeff, constant);
                if (common > 1) {
                    const subCoeff = coeff / common;
                    const subConst = constant / common;
                    // form: common(subCoeff*var + subConst)/divisor
                    // ËôïÁêÜÊã¨ËôüÂÖßÁöÑÁ¨¶Ëôü
                    let inner = "";
                    if (subCoeff === 1) inner += variable;
                    else if (subCoeff === -1) inner += "-" + variable;
                    else inner += subCoeff + variable;
                    
                    if (subConst > 0) inner += "+" + subConst;
                    else inner += subConst; // subConst has sign
                    
                    // LaTeX ÂΩ¢Âºè
                    results.push(`\\frac{${common}(${inner})}{${divisor}}`);
                    // Inline ÂΩ¢Âºè
                    results.push(`${common}(${inner})/${divisor}`);
                }

                // 2. ÂàÜÈ†ÖÈô§ÂΩ¢Âºè: (ax)/d + b/d
                const isCoeffDivisible = (coeff % divisor === 0);
                const isConstDivisible = (constant % divisor === 0);
                
                if (isConstDivisible) {
                    const constVal = constant / divisor;
                    // Á¨¨‰∏ÄÈ†Ö: coeff*var / divisor
                    let term1 = "";
                    if (isCoeffDivisible) {
                        const k = coeff / divisor;
                        if (k === 1) term1 = variable;
                        else if (k === -1) term1 = "-" + variable;
                        else term1 = k + variable;
                    } else {
                        // ‰øùÁïôÂàÜÊï∏ÂΩ¢ÂºèÔºåÂ¶Ç 5b/3
                        term1 = `${coeff}${variable}/${divisor}`;
                        // ‰πüÊé•Âèó LaTeX Ê†ºÂºèÁöÑÂàÜÊï∏
                        results.push(`\\frac{${coeff}${variable}}{${divisor}}${constVal > 0 ? '+' + constVal : constVal}`);
                    }
                    
                    // Á¨¨‰∫åÈ†Ö: constVal
                    let term2 = "";
                    if (constVal > 0) term2 = "+" + constVal;
                    else if (constVal < 0) term2 = "" + constVal;
                    else term2 = ""; // +0 ÂøΩÁï•
                    
                    if (term1 && term2) {
                        results.push(term1 + term2); // ‰æãÂ¶Ç 5b/3 - 10
                        // ‰∫§ÊèõÈ†ÜÂ∫è: term2 + term1 (Â¶ÇÊûú term1 ÊòØÊ≠£ÁöÑ)
                        let term1Signed = (coeff > 0) ? "+" + term1 : term1;
                        results.push(constVal + term1Signed); // ‰æãÂ¶Ç -10 + 5b/3
                    }
                }
                
                // 3. Â∞èÊï∏/Êï¥Êï∏ÂΩ¢Âºè
                const c1 = coeff / divisor;
                const c2 = constant / divisor;
                const isNice = (n) => Number.isInteger(n) || (n.toString().split('.')[1] || '').length <= 2;
                
                if (isNice(c1) && isNice(c2)) {
                    let form1 = "";
                    if (c1 === 1) form1 += variable;
                    else if (c1 === -1) form1 += "-" + variable;
                    else form1 += c1 + variable;
                    
                    if (c2 > 0) form1 += "+" + c2;
                    else if (c2 < 0) form1 += c2; 
                    
                    results.push(form1);
                    
                    // ‰∫§ÊèõÈ†ÜÂ∫è
                    let form2 = "" + c2;
                    if (c1 > 0) form2 += "+" + (c1 === 1 ? "" : c1) + variable;
                    else if (c1 < 0) form2 += (c1 === -1 ? "-" : c1) + variable;
                    results.push(form2);
                }

                return results;
            }

            // ÁîüÊàêÈö®Ê©üÈ°åÁõÆ - ‰∏ªÈ†ÖËÆäÊèõ 10 Á®ÆÈ°åÂûã
            function generateQuestions() {
                const questions = [
                    // Type 1: (c1*a + b) / c2 = b - c3 -> a subject
                    // Ans: a = ( (c2-1)b - c2*c3 ) / c1
                    (() => {
                        const c1 = getRandomInt(2, 5);
                        const c2 = getRandomInt(4, 9);
                        const c3 = getRandomInt(1, 5);
                        const text = `\\text{‰ª§ } a \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{${c1}a+b}{${c2}}=b-${c3} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const numB = c2 - 1; 
                        const constTerm = c2 * c3; 
                        
                        // Numerator: numB*b - constTerm
                        const numVars = [
                            `${numB}b-${constTerm}`,
                            `-${constTerm}+${numB}b`
                        ];
                        const denVars = [`${c1}`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateExpandedVariations(numB, 'b', -constTerm, c1)
                        ];
                        
                        const subject = 'a';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);
                        
                        // Display answer usually takes the first (LaTeX) variant
                        return { question: `\\frac{${c1}a+b}{${c2}}=b-${c3}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),
                    
                    // Type 2: c1/h - 1/k = c2 -> k subject
                    // Ans: k = h / (c1 - c2*h)
                    (() => {
                        const c1 = getRandomInt(2, 5);
                        const c2 = getRandomInt(2, 5);
                        const text = `\\text{‰ª§ } k \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{${c1}}{h}-\\frac{1}{k}=${c2} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const numVars = [`h`];
                        const denVars = [`${c1}-${c2}h`, `-${c2}h+${c1}`];
                        const numVarsNeg = [`-h`];
                        const denVarsNeg = [`${c2}h-${c1}`, `-${c1}+${c2}h`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateFractionVariations(numVarsNeg, denVarsNeg)
                        ];
                        
                        const subject = 'k';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);
                        
                        return { question: `\\frac{${c1}}{h}-\\frac{1}{k}=${c2}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 3: c1(c2*m + n) = m + c3 -> n subject
                    // Ans: n = (c3 - (c1*c2 - 1)m) / c1
                    (() => {
                        const c1 = getRandomInt(2, 4);
                        const c2 = getRandomInt(2, 4);
                        const c3 = getRandomInt(5, 9);
                        const text = `\\text{‰ª§ } n \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } ${c1}(${c2}m+n)=m+${c3} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const coeffM = c1 * c2 - 1; 
                        const numVars = [`${c3}-${coeffM}m`, `-${coeffM}m+${c3}`];
                        const denVars = [`${c1}`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateExpandedVariations(-coeffM, 'm', c3, c1)
                        ];

                        const subject = 'n';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);
                        
                        return { question: `${c1}(${c2}m+n)=m+${c3}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 4: (c1*a + c2*b - c3)/b = c4 -> b subject
                    // Ans: b = (c1*a - c3) / (c4 - c2)
                    (() => {
                        const c1 = getRandomInt(2, 5);
                        const c2 = getRandomInt(2, 6);
                        const c3 = getRandomInt(3, 9);
                        const c4 = getRandomInt(7, 12); 
                        const text = `\\text{‰ª§ } b \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{${c1}a+${c2}b-${c3}}{b}=${c4} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const denom = c4 - c2;
                        const numVars = [`${c1}a-${c3}`, `-${c3}+${c1}a`];
                        const denVars = [`${denom}`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateExpandedVariations(c1, 'a', -c3, denom)
                        ];
                        
                        const subject = 'b';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `\\frac{${c1}a+${c2}b-${c3}}{b}=${c4}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 5: Ax = (Bx + D)C -> x subject
                    // Ans: x = DC / (A - BC)
                    (() => {
                        const B = getRandomInt(2, 5);
                        const text = `\\text{‰ª§ } x \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } Ax=(${B}x+D)C \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const numVars = [`DC`, `CD`];
                        const denVars = [`A-${B}C`, `-${B}C+A`];
                        const numVarsNeg = [`-DC`, `-CD`];
                        const denVarsNeg = [`${B}C-A`, `-A+${B}C`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateFractionVariations(numVarsNeg, denVarsNeg)
                        ];
                        
                        const subject = 'x';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `Ax=(${B}x+D)C`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 6: k = (c1*x - y)/y -> y subject
                    // Ans: y = c1*x / (k+1)
                    (() => {
                        const c1 = getRandomInt(2, 5);
                        const text = `\\text{‰ª§ } y \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } k=\\frac{${c1}x-y}{y} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const numVars = [`${c1}x`, `x${c1}`];
                        const denVars = [`k+1`, `1+k`];
                        
                        const exprAnswers = generateFractionVariations(numVars, denVars);
                        
                        const subject = 'y';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `k=\\frac{${c1}x-y}{y}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 7: (a+c1)/c2 = (b+c3)/c4 -> b subject
                    // Ans: b = (c4*a + (c4*c1 - c2*c3)) / c2
                    (() => {
                        const c1 = getRandomInt(2, 6);
                        const c2 = getRandomInt(2, 4);
                        const c3 = getRandomInt(1, 3);
                        const c4 = getRandomInt(2, 4);
                        const text = `\\text{‰ª§ } b \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{a+${c1}}{${c2}}=\\frac{b+${c3}}{${c4}} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const constTerm = c4 * c1 - c2 * c3;
                        let numVars;
                        if (constTerm >= 0) {
                            numVars = [`${c4}a+${constTerm}`, `${constTerm}+${c4}a`];
                        } else {
                            numVars = [`${c4}a${constTerm}`, `${constTerm}+${c4}a`]; 
                        }
                        const denVars = [`${c2}`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateExpandedVariations(c4, 'a', constTerm, c2)
                        ];
                        
                        const subject = 'b';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `\\frac{a+${c1}}{${c2}}=\\frac{b+${c3}}{${c4}}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 8: c1(h + c2*k) = c3*h + c4 -> h subject
                    // Ans: h = (c4 - c1*c2*k) / (c1 - c3)
                    (() => {
                        const c1 = getRandomInt(5, 9);
                        const c2 = getRandomInt(2, 5);
                        const c3 = getRandomInt(2, 4);
                        const c4 = getRandomInt(5, 9);
                        const text = `\\text{‰ª§ } h \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } ${c1}(h+${c2}k)=${c3}h+${c4} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const coeffH = c1 - c3;
                        const constK = c1 * c2;
                        const numVars = [`${c4}-${constK}k`, `-${constK}k+${c4}`];
                        const denVars = [`${coeffH}`];
                        
                        let exprAnswers;
                        if (coeffH === 1) {
                            exprAnswers = numVars;
                        } else {
                            const negCoeffH = -coeffH;
                            const numVarsNeg = [`${constK}k-${c4}`, `-${c4}+${constK}k`];
                            const denVarsNeg = [`${negCoeffH}`];
                            
                            exprAnswers = [
                                ...generateFractionVariations(numVars, denVars),
                                ...generateFractionVariations(numVarsNeg, denVarsNeg),
                                ...generateExpandedVariations(-constK, 'k', c4, coeffH)
                            ];
                        }
                        
                        const subject = 'h';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `${c1}(h+${c2}k)=${c3}h+${c4}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 9: (c1 - c2*a)/b = c3 -> a subject
                    // Ans: a = (c1 - c3*b) / c2
                    (() => {
                        const c1 = getRandomInt(3, 9);
                        const c2 = getRandomInt(2, 5);
                        const c3 = getRandomInt(2, 6);
                        const text = `\\text{‰ª§ } a \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{${c1}-${c2}a}{b}=${c3} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const numVars = [`${c1}-${c3}b`, `-${c3}b+${c1}`];
                        const denVars = [`${c2}`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateExpandedVariations(-c3, 'b', c1, c2)
                        ];
                        
                        const subject = 'a';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `\\frac{${c1}-${c2}a}{b}=${c3}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })(),

                    // Type 10: c1/(h+k) = k/(h-c2) -> h subject
                    // Ans: h = (c1*c2 + k^2) / (c1 - k)
                    (() => {
                        const c1 = getRandomInt(2, 6);
                        const c2 = getRandomInt(2, 5);
                        const text = `\\text{‰ª§ } h \\text{ ÊàêÁÇ∫ÂÖ¨Âºè } \\frac{${c1}}{h+k}=\\frac{k}{h-${c2}} \\text{ ÁöÑ‰∏ªÈ†Ö„ÄÇ}`;
                        
                        const constTerm = c1 * c2;
                        const numVars = [`${constTerm}+k^2`, `k^2+${constTerm}`];
                        const denVars = [`${c1}-k`, `-k+${c1}`];
                        const numVarsNeg = [`-${constTerm}-k^2`, `-k^2-${constTerm}`];
                        const denVarsNeg = [`k-${c1}`, `-${c1}+k`];
                        
                        const exprAnswers = [
                            ...generateFractionVariations(numVars, denVars),
                            ...generateFractionVariations(numVarsNeg, denVarsNeg)
                        ];
                        
                        const subject = 'h';
                        const correctAnswers = exprAnswers.map(ans => `${subject}=${ans}`);

                        return { question: `\\frac{${c1}}{h+k}=\\frac{k}{h-${c2}}`, text: text, answer: correctAnswers[0], correctAnswers: correctAnswers };
                    })()
                ];
                return questions;
            }
            
            // Ê™¢Êü•Á≠îÊ°à
            function checkAnswer(userAnswer, correctAnswers) {
                if (!userAnswer) return false;
                
                const normalize = (str) => {
                    let s = str.replace(/\s+/g, ''); // ÁßªÈô§Á©∫Ê†º
                    s = s.replace(/\*/g, ''); // ÁßªÈô§‰πòËôü
                    s = s.replace(/\\times/g, ''); 
                    s = s.replace(/\\cdot/g, '');
                    // Ê®ôÊ∫ñÂåñÊåáÊï∏: k^2 -> k^{2}
                    s = s.replace(/\^(\d+)/g, '^{$1}');
                    
                    // ÁßªÈô§ LaTeX Ê†ºÂºèÈõúË®äÔºå‰æãÂ¶Ç \left( \right) ËΩâÁÇ∫ ()
                    s = s.replace(/\\left\(/g, '(');
                    s = s.replace(/\\right\)/g, ')');
                    
                    return s;
                };

                const normUser = normalize(userAnswer);

                for (let correctAnswer of correctAnswers) {
                    const normCorrect = normalize(correctAnswer);
                    if (normUser === normCorrect) {
                        return true;
                    }
                }
                return false;
            }
            
            // Ê∏≤ÊüìÈ°åÁõÆÂ∞éËà™ (Ê∏¨È©ó)
            function renderQuestionNav() {
                const navContainer = document.getElementById('question-nav');
                navContainer.innerHTML = '';
                
                for (let i = 0; i < questions.length; i++) {
                    const btn = document.createElement('button');
                    btn.className = `question-nav-btn ${i === currentQuestionIndex ? 'active' : ''} ${userAnswers[i] ? 'answered' : ''}`;
                    btn.textContent = i + 1;
                    btn.setAttribute('data-index', i);
                    
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        currentQuestionIndex = index;
                        renderCurrentQuestion();
                        renderQuestionNav();
                    });
                    
                    navContainer.appendChild(btn);
                }
            }
            
            // Ê∏≤ÊüìÁï∂Ââç‰æãÈ°å (‰æãÈ°åÊ®°Âºè)
            function renderCurrentExample() {
                const exampleContainer = document.getElementById('example-card-container');
                const example = examples[currentExampleIndex];
                const prevButton = document.getElementById('prev-example');
                const nextButton = document.getElementById('next-example');
                const progressText = document.getElementById('example-progress');

                progressText.textContent = `‰æãÈ°å ${currentExampleIndex + 1} / 10`;

                if (currentExampleIndex === 0) {
                    prevButton.disabled = true;
                    prevButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    prevButton.disabled = false;
                    prevButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }

                if (currentExampleIndex === examples.length - 1) {
                    nextButton.disabled = true;
                    nextButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    nextButton.disabled = false;
                    nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }

                // ÊßãÂª∫Ê≠•È©ü HTML
                let stepsHtml = `
                    <div class="step-row">
                        <div class="step-math">\\(\\displaystyle ${example.questionMath}\\)</div>
                    </div>
                `;
                
                example.steps.forEach(step => {
                    const noteHtml = step.note ? `<div class="step-note">\\(${step.note}\\)</div>` : '';
                    stepsHtml += `
                        <div class="step-row">
                            <div class="step-math">\\(\\displaystyle ${step.math}\\)</div>
                            ${noteHtml}
                        </div>
                    `;
                });

                exampleContainer.innerHTML = `
                    <div class="mb-6 relative">
                        <div class="question-number example-number">${currentExampleIndex + 1}</div>
                        <h3 class="question-title text-xl font-bold pl-6">‰æãÈ°åÊºîÁ§∫</h3>
                        <div class="mt-4 text-lg">\\(\\displaystyle ${example.question}\\)</div>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded border border-gray-200">
                        <h4 class="font-bold text-gray-700 mb-4 border-b pb-2">Ëß£È°åÊ≠•È©ü:</h4>
                        ${stepsHtml}
                    </div>
                `;

                MathJax.typeset([exampleContainer]);
            }

            // ÁîüÊàêÈçµÁõ§ HTML
            function renderKeypad() {
                // ÂÆöÁæ©ÈçµÁõ§‰ΩàÂ±Ä
                const rows = [
                    [
                        { label: 'a', type: 'var', val: 'a' },
                        { label: 'b', type: 'var', val: 'b' },
                        { label: 'h', type: 'var', val: 'h' },
                        { label: 'k', type: 'var', val: 'k' },
                        { label: 'm', type: 'var', val: 'm' },
                        { label: 'n', type: 'var', val: 'n' }
                    ],
                    [
                        { label: 'x', type: 'var', val: 'x' },
                        { label: 'y', type: 'var', val: 'y' },
                        { label: 'A', type: 'var', val: 'A' },
                        { label: 'B', type: 'var', val: 'B' },
                        { label: 'C', type: 'var', val: 'C' },
                        { label: 'D', type: 'var', val: 'D' }
                    ],
                    [
                        { label: '7', type: 'num', val: '7' },
                        { label: '8', type: 'num', val: '8' },
                        { label: '9', type: 'num', val: '9' },
                        { label: '√∑', type: 'op', val: '/' },
                        { label: '(', type: 'op', val: '(' },
                        { label: ')', type: 'op', val: ')' }
                    ],
                    [
                        { label: '4', type: 'num', val: '4' },
                        { label: '5', type: 'num', val: '5' },
                        { label: '6', type: 'num', val: '6' },
                        { label: '√ó', type: 'op', val: '*' },
                        { label: '^', type: 'op', val: '^' },
                        { label: 'DEL', type: 'action', val: 'DEL' }
                    ],
                    [
                        { label: '1', type: 'num', val: '1' },
                        { label: '2', type: 'num', val: '2' },
                        { label: '3', type: 'num', val: '3' },
                        { label: '-', type: 'op', val: '-' },
                        { label: '+', type: 'op', val: '+' },
                        { label: 'CLR', type: 'action', val: 'CLR' }
                    ],
                    [
                        { label: '0', type: 'num', val: '0' },
                        { label: '.', type: 'num', val: '.' },
                        { label: '=', type: 'op', val: '=' }
                    ]
                ];

                let html = '<div class="keypad-container"><div class="keypad-grid">';
                
                rows.forEach(row => {
                    row.forEach(key => {
                        let className = 'key-btn';
                        if (key.type === 'var') className += ' key-btn-var';
                        if (key.type === 'op') className += ' key-btn-op';
                        if (key.type === 'action') className += ' key-btn-action';
                        
                        html += `<div class="${className}" data-val="${key.val}">${key.label}</div>`;
                    });
                });
                
                html += '</div></div>';
                return html;
            }

            // Ê∏≤ÊüìÁï∂ÂâçÈ°åÁõÆ (Ê∏¨È©óÊ®°Âºè)
            function renderCurrentQuestion() {
                const questionContainer = document.getElementById('question-container');
                const question = questions[currentQuestionIndex];
                const prevButton = document.getElementById('prev-question');
                const nextButton = document.getElementById('next-question');
                const submitButton = document.getElementById('submit-quiz');
                const progressText = document.getElementById('question-progress');
                
                progressText.textContent = `Á¨¨ ${currentQuestionIndex + 1} È°å / ÂÖ± ${questions.length} È°å`;
                
                if (currentQuestionIndex === 0) {
                    prevButton.disabled = true;
                    prevButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    prevButton.disabled = false;
                    prevButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                if (currentQuestionIndex === questions.length - 1) {
                    nextButton.classList.add('hidden');
                    submitButton.classList.remove('hidden');
                } else {
                    nextButton.classList.remove('hidden');
                    submitButton.classList.add('hidden');
                }
                
                // ‰ΩøÁî® \displaystyle Á¢∫‰øùÈ°åÁõÆÈ°ØÁ§∫Ê∏ÖÊô∞
                // Âä†ÂÖ• keypad
                questionContainer.innerHTML = `
                    <div class="mb-6 relative">
                        <div class="question-number">${currentQuestionIndex + 1}</div>
                        <h3 class="question-title text-xl font-bold pl-6">‰∏ªÈ†ÖËÆäÊèõ</h3>
                        <div class="mt-4 text-lg">\\(\\displaystyle ${question.text}\\)</div>
                    </div>
                    <div class="mt-6">
                        <label class="block text-gray-700 font-medium mb-2">‰Ω†ÁöÑÁ≠îÊ°à (ÈúÄËº∏ÂÖ•ÂÆåÊï¥ÂÖ¨ÂºèÔºåÂ¶Ç x=...):</label>
                        <div class="flex flex-col">
                            <!-- Ë®≠ÂÆö readonly Èò≤Ê≠¢ÊâãÊ©üÈçµÁõ§ÂΩàÂá∫Ôºå‰ΩÜ‰øùÁïô focus Ê®£Âºè -->
                            <input type="text" class="answer-input" id="answer-${currentQuestionIndex}" data-question="${currentQuestionIndex}" value="${userAnswers[currentQuestionIndex] || ''}" placeholder="‰æãÂ¶Ç: a=(7b-8)/3" readonly inputmode="none">
                            <div class="answer-preview" id="preview-${currentQuestionIndex}">
                                <span class="preview-label">È†êË¶Ω</span>
                            </div>
                        </div>
                        ${renderKeypad()}
                        <div class="hint-box mt-3">
                            <p class="text-sm text-gray-700">
                                <strong>Ëº∏ÂÖ•ÊèêÁ§∫:</strong>
                            </p>
                            <ul class="text-sm text-gray-600 mt-1 list-disc list-inside">
                                <li>ÂøÖÈ†àËº∏ÂÖ•‰∏ªÈ†ÖÂèäÁ≠âËôüÔºå‰æãÂ¶Ç <code class="bg-gray-200 px-1 rounded">x=...</code></li>
                                <li>ÈªûÊìä‰∏äÊñπÊåâÈàïËº∏ÂÖ•ËÆäÊï∏ËàáÁ¨¶Ëôü„ÄÇ</li>
                                <li>Ê≥®ÊÑèÂàÜÂ≠êÊàñÂàÜÊØçËã•Â§öÊñº‰∏ÄÈ†ÖÔºåÂèØËÉΩÈúÄË¶Å‰ΩøÁî®Êã¨Ëôü„ÄÇ</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                MathJax.typeset([questionContainer]);
                
                const inputField = document.getElementById(`answer-${currentQuestionIndex}`);
                const previewDiv = document.getElementById(`preview-${currentQuestionIndex}`);
                const keypadBtns = questionContainer.querySelectorAll('.key-btn');
                
                if (userAnswers[currentQuestionIndex]) {
                    updatePreview(userAnswers[currentQuestionIndex], previewDiv);
                }
                
                // ÈçµÁõ§‰∫ã‰ª∂ËôïÁêÜ
                keypadBtns.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault(); 
                        const val = this.getAttribute('data-val');
                        let currentVal = inputField.value;
                        
                        if (val === 'DEL') {
                            inputField.value = currentVal.slice(0, -1);
                        } else if (val === 'CLR') {
                            inputField.value = '';
                        } else {
                            inputField.value = currentVal + val;
                        }
                        
                        // Ëß∏ÁôºÊõ¥Êñ∞
                        const newValue = inputField.value;
                        const questionIndex = inputField.getAttribute('data-question');
                        updatePreview(newValue, previewDiv);
                        userAnswers[questionIndex] = newValue;
                        renderQuestionNav();
                    });
                });
            }
            
            function updatePreview(value, previewDiv) {
                if (!value) {
                    previewDiv.innerHTML = '<span class="preview-label">È†êË¶Ω</span>';
                    return;
                }
                let formattedValue = value;
                // Á∞°ÂñÆÁöÑ LaTeX ËΩâÊèõ
                formattedValue = formattedValue.replace(/\^(\d+)/g, '^{$1}');
                
                // ÊîØÊè¥ÂÆåÊï¥ÂÖ¨ÂºèÁöÑÈ†êË¶ΩÔºåÂ¶Ç a=(...)/...
                // Ê™¢Êü•ÊòØÂê¶ÊúâÁ≠âËôüÔºå‰∏¶ËôïÁêÜÁ≠âËôüÂè≥ÈÇäÁöÑÂàÜÊï∏
                if (formattedValue.includes('=')) {
                    let parts = formattedValue.split('=');
                    let rhs = parts[1];
                    
                    if (rhs.includes('/') && !rhs.includes('\\frac')) {
                        if (rhs.includes(')/')) {
                            rhs = rhs.replace(/\((.*?)\)\/(.*)/, '\\frac{$1}{$2}');
                        } else if (rhs.match(/(\w+)\/(\w+)/)) {
                             rhs = rhs.replace(/(\w+)\/(\w+)/, '\\frac{$1}{$2}');
                        }
                        formattedValue = parts[0] + '=' + rhs;
                    }
                } else {
                    // Ê≤íÁ≠âËôüÊôÇÁöÑËàäÈÇèËºØÔºàÂÖºÂÆπËº∏ÂÖ•‰∏≠ÈÄîÔºâ
                    if (formattedValue.includes('/') && !formattedValue.includes('\\frac')) {
                        if (formattedValue.includes(')/')) {
                            formattedValue = formattedValue.replace(/\((.*?)\)\/(.*)/, '\\frac{$1}{$2}');
                        } else if (formattedValue.match(/(\w+)\/(\w+)/)) {
                             formattedValue = formattedValue.replace(/(\w+)\/(\w+)/, '\\frac{$1}{$2}');
                        }
                    }
                }
                
                formattedValue = formattedValue.replace(/\*/g, '');
                
                previewDiv.innerHTML = '<span class="preview-label">È†êË¶Ω</span>\\(\\displaystyle ' + formattedValue + '\\)';
                MathJax.typeset([previewDiv]);
            }
            
            function showResults() {
                const quizContainer = document.getElementById('quiz-container');
                const resultsContainer = document.getElementById('results-container');
                const scoreElement = document.getElementById('score');
                const detailedResults = document.getElementById('detailed-results');
                
                let score = 0;
                questions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    if (checkAnswer(userAnswer, question.correctAnswers)) {
                        score++;
                    }
                });
                
                scoreElement.textContent = score;
                
                detailedResults.innerHTML = '';
                questions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = checkAnswer(userAnswer, question.correctAnswers);
                    
                    const resultCard = document.createElement('div');
                    resultCard.className = `result-card shadow-md ${isCorrect ? 'result-correct' : 'result-wrong'}`;
                    
                    let formattedUserAnswer = userAnswer || 'Êú™‰ΩúÁ≠î';
                    if (userAnswer) {
                        formattedUserAnswer = formattedUserAnswer.replace(/\^(\d+)/g, '^{$1}');
                         if (formattedUserAnswer.includes('/') && !formattedUserAnswer.includes('\\frac')) {
                             // Á∞°ÂñÆËôïÁêÜÈ°ØÁ§∫
                             if (formattedUserAnswer.includes('=')) {
                                 let parts = formattedUserAnswer.split('=');
                                 if (parts[1].includes(')/')) {
                                     parts[1] = parts[1].replace(/\((.*?)\)\/(.*)/, '\\frac{$1}{$2}');
                                     formattedUserAnswer = parts[0] + '=' + parts[1];
                                 }
                             } else if (formattedUserAnswer.includes(')/')) {
                                formattedUserAnswer = formattedUserAnswer.replace(/\((.*?)\)\/(.*)/, '\\frac{$1}{$2}');
                            }
                        }
                    }
                    
                    resultCard.innerHTML = `
                        <div class="result-header">
                            <div class="flex items-center justify-between">
                                <h4 class="text-lg font-bold">Á¨¨ ${index + 1} È°å</h4>
                                <span class="font-medium">
                                    ${isCorrect ? '‚úì Ê≠£Á¢∫' : '‚úó ÈåØË™§'}
                                </span>
                            </div>
                        </div>
                        <div class="result-body">
                            <div class="mb-3">\\(\\displaystyle ${question.text}\\)</div>
                            <div class="mb-3">
                                <div class="result-label">‰Ω†ÁöÑÁ≠îÊ°à:</div>
                                <div class="result-answer">\\(\\displaystyle ${formattedUserAnswer}\\)</div>
                            </div>
                            <div class="mb-1">
                                <div class="result-label">Ê≠£Á¢∫Á≠îÊ°à:</div>
                                <div class="result-answer">\\(\\displaystyle ${question.answer}\\)</div>
                            </div>
                        </div>
                    `;
                    
                    detailedResults.appendChild(resultCard);
                });
                
                MathJax.typeset([detailedResults]);
                
                quizContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            }
            
            function initQuiz() {
                questions = generateQuestions();
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length).fill('');
                
                renderQuestionNav();
                renderCurrentQuestion();
            }
        });
    </script>
</body>
</html>