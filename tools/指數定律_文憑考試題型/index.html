<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊåáÊï∏ÂÆöÂæãÊ∏¨È©ó (Á∑¥ÁøíÁâà)</title>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif:wght@400;700&display=swap');
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --correct-color: #27ae60;
            --wrong-color: #e74c3c;
            --example-bg: #fffbf0; /* ‰æãÈ°åËÉåÊôØËâ≤ */
            --note-color: #f39c12; /* ÊèêÁ§∫ÊñáÂ≠óÈ°èËâ≤ */
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f9f9f9;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23bdc3c7' fill-opacity='0.15'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .question-card, .example-card {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 5px solid var(--secondary-color);
            background-color: white;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 2.24 5 5 2.24 5 5 2.24 5 5 2.24 5 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%233498db' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }

        .example-card {
            border-left-color: var(--note-color);
        }
        
        .question-card:hover, .example-card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            color: white;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
            color: white;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            z-index: 10;
            position: relative;
        }
        
        .btn-secondary:hover {
            background-color: #6c7a7d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(127, 140, 141, 0.4);
        }
        
        .btn-secondary:active {
            transform: translateY(0);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .answer-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #bdc3c7;
            border-radius: 0.375rem;
            font-family: 'Noto Serif', serif;
            background-color: white;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        
        .answer-input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25);
            outline: none;
        }
        
        .answer-input::placeholder {
            color: #95a5a6;
            opacity: 1;
        }

        /* ËôõÊì¨ÈçµÁõ§Ê®£Âºè */
        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
            max-width: 100%; 
        }

        .keypad-btn {
            padding: 0.75rem;
            font-size: 1.25rem;
            border-radius: 0.5rem;
            border: 1px solid #dcdcdc;
            background-color: white;
            box-shadow: 0 2px 0 rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.1s;
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .keypad-btn:active {
            transform: translateY(2px);
            box-shadow: none;
            background-color: #f0f0f0;
        }

        .keypad-btn.var { background-color: #e8f6f3; color: #16a085; border-color: #d0ece7; }
        .keypad-btn.op { background-color: #ebf5fb; color: #2980b9; border-color: #d6eaf8; }
        .keypad-btn.action { background-color: #fce4ec; color: #c0392b; border-color: #fadbd8; font-size: 1rem; }
        .keypad-btn.num { background-color: white; color: var(--dark-color); }
        .keypad-btn.zero-btn { grid-column: span 4; }

        .answer-input[readonly] {
            background-color: #fdfdfd;
            cursor: default;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            letter-spacing: 1px;
            color: #2c3e50;
        }
        
        .answer-preview {
            min-height: 60px;
            border: 2px solid #bdc3c7;
            border-radius: 0.375rem;
            padding: 1rem 0.75rem 0.75rem 0.75rem;
            margin-top: 0.75rem;
            background-color: #f8f9fa;
            position: relative;
            font-family: 'Noto Serif', serif;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-label {
            position: absolute;
            top: 0;
            left: 0;
            background-color: #bdc3c7;
            color: white;
            font-size: 0.75rem;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem 0 0.25rem 0;
        }
        
        .start-screen {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .start-screen::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M50 0l10 20H40L50 0zm0 100l10-20H40l10 20zM0 50l20 10V40L0 50zm100 0l-20 10V40l20 10zM10 0l10 20H0L10 0zm10 100l10-20H0l10 20zM90 0l10 20H80L90 0zm10 100l10-20H80l10 20z'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .math-symbols {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 1;
        }
        
        .math-symbol {
            position: absolute;
            color: rgba(255, 255, 255, 0.2);
            font-family: 'Noto Serif', serif;
            font-weight: bold;
            user-select: none;
            pointer-events: none;
        }
        
        .start-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 2rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 1rem;
            backdrop-filter: blur(5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 90%;
            width: 500px;
        }
        
        .start-btn {
            background-color: white;
            color: var(--secondary-color);
            font-weight: bold;
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            font-size: 1.25rem;
            transition: all 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border: none;
            cursor: pointer;
            z-index: 10;
            display: block;
            width: 100%;
            margin-bottom: 1rem;
        }

        .start-btn.secondary {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .start-btn.secondary:hover {
            background-color: rgba(255, 255, 255, 0.3);
            border-color: white;
        }
        
        .start-btn:active {
            transform: translateY(-1px);
        }
        
        .start-btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .start-btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .mjx-chtml {
            display: inline-block !important;
        }
        
        .hint-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0 0.375rem 0.375rem 0;
            position: relative;
        }
        
        .hint-box::before {
            content: "üí°";
            position: absolute;
            left: -12px;
            top: -12px;
            background-color: var(--secondary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .question-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            justify-content: center;
        }
        
        .question-nav-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            border: 2px solid #bdc3c7;
            background-color: white;
            position: relative;
            overflow: hidden;
        }
        
        .question-nav-btn:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .question-nav-btn.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
            font-weight: bold;
        }
        
        .question-nav-btn.answered {
            background-color: #d6eaf8;
            border-color: var(--secondary-color);
        }
        
        .question-nav-btn.active.answered {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .question-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background-color: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .example-number {
            background-color: var(--note-color);
        }
        
        .question-title {
            font-family: 'Noto Serif', serif;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
        }
        
        .question-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--secondary-color);
        }
        
        .nav-buttons {
            position: relative;
        }
        
        .nav-buttons::before {
            content: "";
            position: absolute;
            top: -20px;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(52, 152, 219, 0.5), transparent);
        }
        
        .result-card {
            border-radius: 0.5rem;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .result-header {
            padding: 1rem;
            color: white;
        }
        
        .result-correct .result-header {
            background-color: var(--correct-color);
        }
        
        .result-wrong .result-header {
            background-color: var(--wrong-color);
        }
        
        .result-body {
            padding: 1rem;
            background-color: white;
        }
        
        .result-label {
            font-weight: 500;
            color: var(--dark-color);
            margin-bottom: 0.25rem;
        }
        
        .result-answer {
            background-color: #f8f9fa;
            padding: 0.5rem;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }
        
        .score-display {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .score-display::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M50 0l10 20H40L50 0zm0 100l10-20H40l10 20zM0 50l20 10V40L0 50zm100 0l-20 10V40l20 10zM10 0l10 20H0L10 0zm10 100l10-20H0l10 20zM90 0l10 20H80L90 0zm10 100l10-20H80l10 20z'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .score-number {
            font-size: 3rem;
            font-weight: bold;
            font-family: 'Noto Serif', serif;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .retry-btn {
            background-color: var(--primary-color);
            color: white;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .retry-btn:hover {
            background-color: #1a2530;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 62, 80, 0.4);
        }
        
        .retry-btn:active {
            transform: translateY(0);
        }

        /* Ê≠•È©üÊ®£Âºè */
        .step-row {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            border-bottom: 1px dashed #e0e0e0;
            padding-bottom: 0.5rem;
        }

        .step-row:last-child {
            border-bottom: none;
        }

        .step-math {
            font-size: 1.1rem;
            line-height: 1.6;
            flex-grow: 1;
            padding-right: 1rem;
        }

        .step-note {
            background-color: #fff8e1;
            color: #d35400;
            font-size: 0.85rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            border: 1px solid #ffe0b2;
            white-space: nowrap;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
        }

        .step-note::before {
            content: "üí°";
            margin-right: 5px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <!-- ÈñãÂßãÁï´Èù¢ (È†êË®≠È°ØÁ§∫) -->
    <div id="start-screen" class="start-screen">
        <div class="math-symbols" id="math-symbols"></div>
        <div class="start-content">
            <h1 class="text-4xl font-bold mb-4">ÊåáÊï∏ÂÆöÂæãÊ∏¨È©ó</h1>
            <p class="text-xl mb-8">È¶ôÊ∏Ø‰∏≠Â≠∏ÊñáÊÜëË©¶_Âç∑‰∏ÄÈ°åÂûã</p>
            <button id="start-quiz-btn" class="start-btn">
                ÈñãÂßãÊ∏¨È©ó
            </button>
            <button id="view-examples-btn" class="start-btn secondary">
                Êü•Èñ±‰æãÈ°å
            </button>
        </div>
    </div>

    <!-- Ê∏¨È©ó‰∏ª‰ªãÈù¢ -->
    <div id="main-container" class="container mx-auto px-4 py-8 max-w-4xl hidden">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-primary-color">ÊåáÊï∏ÂÆöÂæãÊ∏¨È©ó</h1>
            <p class="text-gray-600 mt-2">È¶ôÊ∏Ø‰∏≠Â≠∏ÊñáÊÜëË©¶_Âç∑‰∏ÄÈ°åÂûã</p>
        </header>
        
        <div id="quiz-container">
            <!-- È°åÁõÆÂ∞éËà™ -->
            <div class="question-nav" id="question-nav">
                <!-- ÂãïÊÖãÁîüÊàêÈ°åÁõÆÂ∞éËà™ÊåâÈàï -->
            </div>
            
            <div id="question-container" class="question-card rounded-lg p-6">
                <!-- È°åÁõÆÂÖßÂÆπÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
            </div>
            
            <div class="mt-8 flex justify-between nav-buttons">
                <button id="prev-question" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ä‰∏ÄÈ°å
                </button>
                <button id="next-question" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ã‰∏ÄÈ°å
                </button>
                <button id="submit-quiz" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg hidden">
                    Êèê‰∫§Ê∏¨È©ó
                </button>
            </div>
            
            <div class="mt-4 text-center">
                <span id="question-progress" class="text-gray-600">Á¨¨ 1 È°å / ÂÖ± 10 È°å</span>
            </div>
        </div>
        
        <div id="results-container" class="mt-8 hidden">
            <div class="score-display mb-8">
                <h2 class="text-2xl font-bold mb-4">Ê∏¨È©óÁµêÊûú</h2>
                <div class="score-number"><span id="score">0</span> / 10</div>
            </div>
            <div id="detailed-results" class="space-y-6"></div>
            <div class="mt-8 text-center">
                <button id="retry-quiz" class="retry-btn px-6 py-3 rounded-lg font-medium text-lg">
                    ÈáçÊñ∞Ê∏¨È©ó
                </button>
            </div>
        </div>
    </div>

    <!-- ‰æãÈ°åÂ±ïÁ§∫‰ªãÈù¢ -->
    <div id="examples-container" class="container mx-auto px-4 py-8 max-w-4xl hidden">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-primary-color">ÊåáÊï∏ÂÆöÂæã - ‰æãÈ°åÁ§∫ÁØÑ</h1>
            <p class="text-gray-600 mt-2">Ë©≥Á¥∞Ê≠•È©üËß£Ë™™</p>
        </header>
        
        <div id="example-card-container" class="example-card rounded-lg p-6">
            <!-- ‰æãÈ°åÂÖßÂÆπÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
        </div>

        <div class="mt-8 flex justify-between nav-buttons">
            <button id="prev-example" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg">
                ‰∏ä‰∏Ä‰æã
            </button>
            <div class="flex gap-2">
                 <button id="back-to-menu" class="btn-secondary px-6 py-3 rounded-lg font-medium text-lg bg-gray-500 hover:bg-gray-600">
                    ËøîÂõûÁõÆÈåÑ
                </button>
                <button id="next-example" class="btn-primary px-6 py-3 rounded-lg font-medium text-lg">
                    ‰∏ã‰∏Ä‰æã
                </button>
            </div>
        </div>

        <div class="mt-4 text-center">
            <span id="example-progress" class="text-gray-600">‰æãÈ°å 1 / 10</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÂÖ®Â±ÄËÆäÈáè
            let questions = [];
            let currentQuestionIndex = 0;
            let currentExampleIndex = 0;
            let userAnswers = [];
            
            // Âõ∫ÂÆö‰æãÈ°åÊï∏Êìö (10È°å)
            const examples = [
                {
                    id: 1,
                    question: "\\frac{x^{-4} y^{9}}{y^{5}}",
                    steps: [
                        { math: "= x^{-4} y^{9-5}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{-4} y^{4}" },
                        { math: "= \\frac{y^{4}}{x^{4}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 2,
                    question: "\\frac{x^{18} y^{10}}{(x^{5} y)^{3}}",
                    steps: [
                        { math: "= \\frac{x^{18} y^{10}}{x^{5\\times3} y^{1\\times3}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{18} y^{10}}{x^{15} y^{3}}" },
                        { math: "= x^{18-15} y^{10-3}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{3} y^{7}" }
                    ]
                },
                {
                    id: 3,
                    question: "\\frac{(x y^{-2})^{4}}{y^{6}}",
                    steps: [
                        { math: "= \\frac{x^{4} y^{-2\\times4}}{y^{6}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{4} y^{-8}}{y^{6}}" },
                        { math: "= x^{4} y^{-8-6}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{4} y^{-14}" },
                        { math: "= \\frac{x^{4}}{y^{14}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 4,
                    question: "\\frac{x y^{8}}{(x^{-2} y^{4})^{3}}",
                    steps: [
                        { math: "= \\frac{x y^{8}}{x^{-2\\times3} y^{4\\times3}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{1} y^{8}}{x^{-6} y^{12}}" },
                        { math: "= x^{1-(-6)} y^{8-12}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{7} y^{-4}" },
                        { math: "= \\frac{x^{7}}{y^{4}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 5,
                    question: "\\frac{(x^{3} y^{4})^{2}}{x^{5} y^{-2}}",
                    steps: [
                        { math: "= \\frac{x^{3\\times2} y^{4\\times2}}{x^{5} y^{-2}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{6} y^{8}}{x^{5} y^{-2}}" },
                        { math: "= x^{6-5} y^{8-(-2)}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{1} y^{10}" },
                        { math: "= x y^{10}" }
                    ]
                },
                {
                    id: 6,
                    question: "\\frac{(x^{4} y^{-1})^{3}}{(x^{-2})^{5}}",
                    steps: [
                        { math: "= \\frac{x^{4\\times3} y^{-1\\times3}}{x^{-2\\times5}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{12} y^{-3}}{x^{-10}}" },
                        { math: "= x^{12-(-10)} y^{-3}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{22} y^{-3}" },
                        { math: "= \\frac{x^{22}}{y^{3}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 7,
                    question: "\\frac{x y^{5}}{(x^{-3} y^{2})^{4}}",
                    steps: [
                        { math: "= \\frac{x y^{5}}{x^{-3\\times4} y^{2\\times4}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{1} y^{5}}{x^{-12} y^{8}}" },
                        { math: "= x^{1-(-12)} y^{5-8}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{13} y^{-3}" },
                        { math: "= \\frac{x^{13}}{y^{3}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 8,
                    question: "\\frac{(xy^{-4})^{2}}{x^{-5}}",
                    steps: [
                        { math: "= \\frac{x^{2} y^{-4\\times2}}{x^{-5}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{2} y^{-8}}{x^{-5}}" },
                        { math: "= x^{2-(-5)} y^{-8}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{7} y^{-8}" },
                        { math: "= \\frac{x^{7}}{y^{8}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 9,
                    question: "(xy^{3})(x^{-2} y^{5})^{2}",
                    steps: [
                        { math: "= (xy^{3})(x^{-2\\times2} y^{5\\times2})", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= (x^{1}y^{3})(x^{-4} y^{10})" },
                        { math: "= x^{1+(-4)} y^{3+10}", note: "a^m \\times a^n = a^{m+n}" },
                        { math: "= x^{-3} y^{13}" },
                        { math: "= \\frac{y^{13}}{x^{3}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                },
                {
                    id: 10,
                    question: "\\frac{(x^{3} y^{-5})^{-2}}{x^{-4} y^{6}}",
                    steps: [
                        { math: "= \\frac{x^{3\\times(-2)} y^{-5\\times(-2)}}{x^{-4} y^{6}}", note: "(ab)^n = a^n b^n, (a^m)^n = a^{mn}" },
                        { math: "= \\frac{x^{-6} y^{10}}{x^{-4} y^{6}}" },
                        { math: "= x^{-6-(-4)} y^{10-6}", note: "\\frac{a^m}{a^n} = a^{m-n}" },
                        { math: "= x^{-2} y^{4}" },
                        { math: "= \\frac{y^{4}}{x^{2}}", note: "a^{-n} = \\frac{1}{a^n}" }
                    ]
                }
            ];

            // ÂâµÂª∫Êï∏Â≠∏Á¨¶ËôüËÉåÊôØ
            createMathSymbols();
            
            // ÊåâÈàï‰∫ã‰ª∂Áõ£ËÅΩÂô®
            
            // ÈñãÂßãÊ∏¨È©óÊåâÈàï
            document.getElementById('start-quiz-btn').addEventListener('click', function() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('main-container').classList.remove('hidden');
                initQuiz();
            });

            // Êü•Èñ±‰æãÈ°åÊåâÈàï
            document.getElementById('view-examples-btn').addEventListener('click', function() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('examples-container').classList.remove('hidden');
                currentExampleIndex = 0;
                renderCurrentExample();
            });

            // ËøîÂõûÁõÆÈåÑÊåâÈàï
            document.getElementById('back-to-menu').addEventListener('click', function() {
                document.getElementById('examples-container').classList.add('hidden');
                document.getElementById('start-screen').classList.remove('hidden');
            });

            // ‰∏ã‰∏ÄÈ°åÊåâÈàï (Ê∏¨È©ó)
            document.getElementById('next-question').addEventListener('click', function() {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    renderCurrentQuestion();
                    renderQuestionNav();
                }
            });
            
            // ‰∏ä‰∏ÄÈ°åÊåâÈàï (Ê∏¨È©ó)
            document.getElementById('prev-question').addEventListener('click', function() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderCurrentQuestion();
                    renderQuestionNav();
                }
            });

            // ‰∏ã‰∏Ä‰æãÊåâÈàï (‰æãÈ°å)
            document.getElementById('next-example').addEventListener('click', function() {
                if (currentExampleIndex < examples.length - 1) {
                    currentExampleIndex++;
                    renderCurrentExample();
                }
            });

            // ‰∏ä‰∏Ä‰æãÊåâÈàï (‰æãÈ°å)
            document.getElementById('prev-example').addEventListener('click', function() {
                if (currentExampleIndex > 0) {
                    currentExampleIndex--;
                    renderCurrentExample();
                }
            });
            
            // Êèê‰∫§Ê∏¨È©óÊåâÈàï
            document.getElementById('submit-quiz').addEventListener('click', function() {
                showResults();
            });
            
            // ÈáçÊñ∞Ê∏¨È©óÊåâÈàï
            document.getElementById('retry-quiz').addEventListener('click', function() {
                const quizContainer = document.getElementById('quiz-container');
                const resultsContainer = document.getElementById('results-container');
                
                resultsContainer.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                
                initQuiz();
            });
            
            // ÂâµÂª∫Êï∏Â≠∏Á¨¶ËôüËÉåÊôØ
            function createMathSymbols(containerId = 'math-symbols') {
                const symbols = ['‚à´', '‚àë', '‚àè', 'œÄ', '‚àö', '‚àû', 'Œ∏', 'Œî', '‚àá', 'Œª', 'Œ±', 'Œ≤', 'Œ≥', 'œÜ', 'œâ', '‚â†', '‚âà', '‚â§', '‚â•', '‚àà', '‚àâ', '‚äÇ', '‚äÉ', '‚à™', '‚à©', '‚àÄ', '‚àÉ', '‚àÑ', '‚à¥', '‚àµ', '‚áí', '‚áî', '‚àÇ', '‚à´', '‚à¨', '‚à≠', '‚àÆ', '‚àØ', '‚à∞', '‚àá', '‚àÜ', '‚àÇ'];
                const container = document.getElementById(containerId);
                
                if (!container) return;
                
                container.innerHTML = '';
                
                for (let i = 0; i < 50; i++) {
                    const symbol = document.createElement('div');
                    symbol.className = 'math-symbol';
                    symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                    
                    // Èö®Ê©ü‰ΩçÁΩÆ
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    
                    // Èö®Ê©üÂ§ßÂ∞è
                    const size = Math.random() * 30 + 20;
                    
                    // Èö®Ê©üÊóãËΩâ
                    const rotation = Math.random() * 360;
                    
                    symbol.style.left = `${x}%`;
                    symbol.style.top = `${y}%`;
                    symbol.style.fontSize = `${size}px`;
                    symbol.style.transform = `rotate(${rotation}deg)`;
                    
                    container.appendChild(symbol);
                }
            }
            
            // ÁîüÊàêÈö®Ê©üÊï¥Êï∏
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            
            // ÁîüÊàêÈ°åÁõÆ
            function generateQuestions() {
                const questions = [
                    // Á¨¨‰∏ÄÈ°å
                    (() => {
                        const a = getRandomInt(-14, -4);
                        const b = getRandomInt(9, 14);
                        const c = getRandomInt(3, 7);
                        const questionText = `\\frac{x^{${a}} y^{${b}}}{y^{${c}}}`;
                        const xPower = a;
                        const yPower = b - c;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨‰∫åÈ°å
                    (() => {
                        const a = getRandomInt(15, 24);
                        const b = getRandomInt(9, 14);
                        const c = getRandomInt(4, 9);
                        const d = getRandomInt(5, 9);
                        const cd = c * d;
                        const questionText = `\\frac{x^{${a}} y^{${b}}}{(x^{${c}} y)^{${d}}}`;
                        const xPower = a - c*d;
                        const yPower = b - d;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨‰∏âÈ°å
                    (() => {
                        const a = getRandomInt(-7, -2);
                        const b = getRandomInt(3, 5);
                        const c = getRandomInt(5, 9);
                        const questionText = `\\frac{(x y^{${a}})^{${b}}}{y^{${c}}}`;
                        const xPower = b;
                        const yPower = a*b - c;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨ÂõõÈ°å
                    (() => {
                        const a = getRandomInt(6, 11);
                        const b = getRandomInt(-5, -3);
                        const c = getRandomInt(4, 7);
                        const d = getRandomInt(3, 5);
                        const questionText = `\\frac{x y^{${a}}}{(x^{${b}} y^{${c}})^{${d}}}`;
                        const xPower = 1 - b*d;
                        const yPower = a - c*d;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨‰∫îÈ°å
                    (() => {
                        const a = getRandomInt(6, 9);
                        const b = getRandomInt(3, 7);
                        const c = getRandomInt(2, 4);
                        const d = getRandomInt(4, 6);
                        const e = getRandomInt(-7, -3);
                        const questionText = `\\frac{(x^{${a}} y^{${b}})^{${c}}}{x^{${d}} y^{${e}}}`;
                        const xPower = a*c - d;
                        const yPower = b*c - e;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨ÂÖ≠È°å
                    (() => {
                        const a = getRandomInt(3, 7);
                        const b = getRandomInt(3, 4);
                        const c = getRandomInt(-5, -3);
                        const d = getRandomInt(4, 6);
                        const questionText = `\\frac{(x^{${a}} y^{-1})^{${b}}}{(x^{${c}})^{${d}}}`;
                        const xPower = a*b - c*d;
                        const yPower = -b;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨‰∏ÉÈ°å
                    (() => {
                        const a = getRandomInt(6, 9);
                        const b = getRandomInt(-5, -3);
                        const c = getRandomInt(4, 7);
                        const d = getRandomInt(3, 5);
                        const questionText = `\\frac{x y^{${a}}}{(x^{${b}} y^{${c}})^{${d}}}`;
                        const xPower = 1 - b*d;
                        const yPower = a - c*d;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨ÂÖ´È°å
                    (() => {
                        const a = getRandomInt(-5, -3);
                        const b = getRandomInt(4, 6);
                        const c = getRandomInt(-7, -4);
                        const questionText = `\\frac{(xy^{${a}})^{${b}}}{x^{${c}}}`;
                        const xPower = b - c;
                        const yPower = a*b;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨‰πùÈ°å
                    (() => {
                        const a = getRandomInt(4, 5);
                        const b = getRandomInt(-5, -4);
                        const c = getRandomInt(3, 7);
                        const d = getRandomInt(3, 5);
                        const questionText = `(xy^{${a}})(x^{${b}} y^{${c}})^{${d}}`;
                        const xPower = 1 + b*d;
                        const yPower = a + c*d;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })(),
                    // Á¨¨ÂçÅÈ°å
                    (() => {
                        const a = getRandomInt(4, 5);
                        const b = getRandomInt(-5, -4);
                        const c = getRandomInt(3, 5);
                        const d = getRandomInt(-7, -4);
                        const e = getRandomInt(5, 9);
                        const questionText = `\\frac{(x^{${a}} y^{${b}})^{${c}}}{x^{${d}} y^{${e}}}`;
                        const xPower = a*c - d;
                        const yPower = b*c - e;
                        const standardAnswer = `x^{${xPower}} y^{${yPower}}`;
                        let positiveExponentAnswer;
                        if (xPower >= 0 && yPower >= 0) {
                            positiveExponentAnswer = standardAnswer;
                        } else if (xPower < 0 && yPower >= 0) {
                            positiveExponentAnswer = `\\frac{y^{${yPower}}}{x^{${Math.abs(xPower)}}}`;
                        } else if (xPower >= 0 && yPower < 0) {
                            positiveExponentAnswer = `\\frac{x^{${xPower}}}{y^{${Math.abs(yPower)}}}`;
                        } else {
                            positiveExponentAnswer = `\\frac{1}{x^{${Math.abs(xPower)}}y^{${Math.abs(yPower)}}}`;
                        }
                        return { question: questionText, answer: positiveExponentAnswer, standardAnswer: standardAnswer, correctAnswers: generateEquivalentAnswers(xPower, yPower) };
                    })()
                ];
                return questions;
            }
            
            // ÁîüÊàêÁ≠âÂÉπÁ≠îÊ°à
            function generateEquivalentAnswers(xPower, yPower) {
                const answers = [];
                // Ê®ôÊ∫ñÂΩ¢ÂºèÔºàÂèØËÉΩÂåÖÂê´Ë≤†ÊåáÊï∏Ôºâ
                answers.push(`x^{${xPower}}y^{${yPower}}`);
                answers.push(`y^{${yPower}}x^{${xPower}}`); // ËÆäÊï∏È†ÜÂ∫è‰∫§Êèõ
                
                // ‰ª•Ê≠£ÊåáÊï∏Ë°®Á§∫ÁöÑÂΩ¢Âºè
                if (xPower >= 0 && yPower >= 0) {
                    if (xPower === 1) { answers.push(`xy^{${yPower}}`); answers.push(`y^{${yPower}}x`); }
                    if (yPower === 1) { answers.push(`x^{${xPower}}y`); answers.push(`yx^{${xPower}}`); }
                    if (xPower === 1 && yPower === 1) { answers.push(`xy`); answers.push(`yx`); }
                } else if (xPower < 0 && yPower >= 0) {
                    const absXPower = Math.abs(xPower);
                    answers.push(`\\frac{y^{${yPower}}}{x^{${absXPower}}}`);
                    answers.push(`y^{${yPower}}x^{-${absXPower}}`);
                    answers.push(`y^{${yPower}}/x^{${absXPower}}`);
                    if (yPower === 1) { answers.push(`\\frac{y}{x^{${absXPower}}}`); answers.push(`y/x^{${absXPower}}`); }
                } else if (xPower >= 0 && yPower < 0) {
                    const absYPower = Math.abs(yPower);
                    answers.push(`\\frac{x^{${xPower}}}{y^{${absYPower}}}`);
                    answers.push(`x^{${xPower}}y^{-${absYPower}}`);
                    answers.push(`x^{${xPower}}/y^{${absYPower}}`);
                    if (xPower === 1) { answers.push(`\\frac{x}{y^{${absYPower}}}`); answers.push(`x/y^{${absYPower}}`); }
                } else {
                    const absXPower = Math.abs(xPower);
                    const absYPower = Math.abs(yPower);
                    answers.push(`\\frac{1}{x^{${absXPower}}y^{${absYPower}}}`);
                    answers.push(`\\frac{1}{y^{${absYPower}}x^{${absXPower}}}`);
                    answers.push(`x^{-${absXPower}}y^{-${absYPower}}`);
                    answers.push(`y^{-${absYPower}}x^{-${absXPower}}`);
                    answers.push(`1/(x^{${absXPower}}y^{${absYPower}})`);
                    answers.push(`1/(y^{${absYPower}}x^{${absXPower}})`);
                }
                return answers;
            }
            
            // Ê™¢Êü•Á≠îÊ°à
            function checkAnswer(userAnswer, correctAnswers) {
                if (!userAnswer) return false;
                userAnswer = userAnswer.replace(/\s+/g, '');
                userAnswer = userAnswer.replace(/\*/g, '');
                userAnswer = userAnswer.replace(/\\times/g, '');
                userAnswer = userAnswer.replace(/\\cdot/g, '');
                userAnswer = userAnswer.replace(/\^(\d+)/g, '^{$1}');
                userAnswer = userAnswer.replace(/\^-(\d+)/g, '^{-$1}');
                
                if (userAnswer.includes('/')) {
                    const parts = userAnswer.split('/');
                    if (parts.length === 2) {
                        if (parts[0].includes('^') || parts[1].includes('^')) {
                            userAnswer = `\\frac{${parts[0]}}{${parts[1]}}`;
                        }
                    }
                }
                
                for (let correctAnswer of correctAnswers) {
                    const standardizedCorrect = correctAnswer.replace(/\s+/g, '');
                    if (userAnswer === standardizedCorrect) {
                        return true;
                    }
                }
                return false;
            }
            
            // Ê∏≤ÊüìÈ°åÁõÆÂ∞éËà™ (Ê∏¨È©ó)
            function renderQuestionNav() {
                const navContainer = document.getElementById('question-nav');
                navContainer.innerHTML = '';
                
                for (let i = 0; i < questions.length; i++) {
                    const btn = document.createElement('button');
                    btn.className = `question-nav-btn ${i === currentQuestionIndex ? 'active' : ''} ${userAnswers[i] ? 'answered' : ''}`;
                    btn.textContent = i + 1;
                    btn.setAttribute('data-index', i);
                    
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        currentQuestionIndex = index;
                        renderCurrentQuestion();
                        renderQuestionNav();
                    });
                    
                    navContainer.appendChild(btn);
                }
            }
            
            // Ê∏≤ÊüìÁï∂Ââç‰æãÈ°å (‰æãÈ°åÊ®°Âºè)
            function renderCurrentExample() {
                const exampleContainer = document.getElementById('example-card-container');
                const example = examples[currentExampleIndex];
                const prevButton = document.getElementById('prev-example');
                const nextButton = document.getElementById('next-example');
                const progressText = document.getElementById('example-progress');

                progressText.textContent = `‰æãÈ°å ${currentExampleIndex + 1} / 10`;

                // ÊéßÂà∂ÊåâÈàïÁãÄÊÖã
                if (currentExampleIndex === 0) {
                    prevButton.disabled = true;
                    prevButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    prevButton.disabled = false;
                    prevButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }

                if (currentExampleIndex === examples.length - 1) {
                    nextButton.disabled = true;
                    nextButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    nextButton.disabled = false;
                    nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }

                // ÊßãÂª∫Ê≠•È©ü HTML - ‰øÆÊ≠£ÔºöÂ∞áÈ°åÁõÆ‰ΩúÁÇ∫Á¨¨‰∏ÄË°å
                let stepsHtml = `
                    <div class="step-row">
                        <div class="step-math">\\(${example.question}\\)</div>
                    </div>
                `;
                
                example.steps.forEach(step => {
                    const noteHtml = step.note ? `<div class="step-note">\\(${step.note}\\)</div>` : '';
                    stepsHtml += `
                        <div class="step-row">
                            <div class="step-math">\\(${step.math}\\)</div>
                            ${noteHtml}
                        </div>
                    `;
                });

                exampleContainer.innerHTML = `
                    <div class="mb-6 relative">
                        <div class="question-number example-number">${currentExampleIndex + 1}</div>
                        <h3 class="question-title text-xl font-bold pl-6">‰æãÈ°åÊºîÁ§∫</h3>
                        <div class="mt-4 text-lg">ÂåñÁ∞° \\(${example.question}\\)Ôºå‰∏¶‰ª•Ê≠£ÊåáÊï∏Ë°®Á§∫Á≠îÊ°à„ÄÇ</div>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded border border-gray-200">
                        <h4 class="font-bold text-gray-700 mb-4 border-b pb-2">Ëß£È°åÊ≠•È©ü:</h4>
                        ${stepsHtml}
                    </div>
                `;

                MathJax.typeset([exampleContainer]);
            }

            // Ê∏≤ÊüìÁï∂ÂâçÈ°åÁõÆ (Ê∏¨È©óÊ®°Âºè)
            function renderCurrentQuestion() {
                const questionContainer = document.getElementById('question-container');
                const question = questions[currentQuestionIndex];
                const prevButton = document.getElementById('prev-question');
                const nextButton = document.getElementById('next-question');
                const submitButton = document.getElementById('submit-quiz');
                const progressText = document.getElementById('question-progress');
                
                progressText.textContent = `Á¨¨ ${currentQuestionIndex + 1} È°å / ÂÖ± ${questions.length} È°å`;
                
                if (currentQuestionIndex === 0) {
                    prevButton.disabled = true;
                    prevButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    prevButton.disabled = false;
                    prevButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                if (currentQuestionIndex === questions.length - 1) {
                    nextButton.classList.add('hidden');
                    submitButton.classList.remove('hidden');
                } else {
                    nextButton.classList.remove('hidden');
                    submitButton.classList.add('hidden');
                }
                
                questionContainer.innerHTML = `
                    <div class="mb-6 relative">
                        <div class="question-number">${currentQuestionIndex + 1}</div>
                        <h3 class="question-title text-xl font-bold pl-6">ÊåáÊï∏ÂÆöÂæã</h3>
                        <div class="mt-4 text-lg">ÂåñÁ∞° \\(${question.question}\\)Ôºå‰∏¶‰ª•Ê≠£ÊåáÊï∏Ë°®Á§∫Á≠îÊ°à„ÄÇ</div>
                    </div>
                    <div class="mt-6">
                        <label class="block text-gray-700 font-medium mb-2">‰Ω†ÁöÑÁ≠îÊ°à:</label>
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="flex-1">
                                <input type="text" class="answer-input" id="answer-${currentQuestionIndex}" data-question="${currentQuestionIndex}" value="${userAnswers[currentQuestionIndex] || ''}" placeholder="Ë´ã‰ΩøÁî®ÈçµÁõ§Ëº∏ÂÖ•Á≠îÊ°à" readonly>
                                <div class="keypad-grid" id="virtual-keypad">
                                    <button class="keypad-btn var" data-val="x">x</button>
                                    <button class="keypad-btn var" data-val="y">y</button>
                                    <button class="keypad-btn op" data-val="^">^</button>
                                    <button class="keypad-btn op" data-val="/">/</button>
                                    
                                    <button class="keypad-btn num" data-val="7">7</button>
                                    <button class="keypad-btn num" data-val="8">8</button>
                                    <button class="keypad-btn num" data-val="9">9</button>
                                    <button class="keypad-btn action delete" data-action="backspace">‚å´</button>
                                    
                                    <button class="keypad-btn num" data-val="4">4</button>
                                    <button class="keypad-btn num" data-val="5">5</button>
                                    <button class="keypad-btn num" data-val="6">6</button>
                                    <button class="keypad-btn op" data-val="-">-</button>
                                    
                                    <button class="keypad-btn num" data-val="1">1</button>
                                    <button class="keypad-btn num" data-val="2">2</button>
                                    <button class="keypad-btn num" data-val="3">3</button>
                                    <button class="keypad-btn action clear" data-action="clear">C</button>
                                    
                                    <button class="keypad-btn num zero-btn" data-val="0">0</button>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="answer-preview" id="preview-${currentQuestionIndex}">
                                    <span class="preview-label">È†êË¶Ω</span>
                                </div>
                                <div class="hint-box mt-4">
                                    <p class="text-sm text-gray-700">
                                        <strong>Ëº∏ÂÖ•ÊèêÁ§∫:</strong>
                                    </p>
                                    <ul class="text-sm text-gray-600 mt-1 list-disc list-inside">
                                        <li>‰ΩøÁî® ^ Ë°®Á§∫ÊåáÊï∏Ôºå‰æãÂ¶Ç x^2 Ë°®Á§∫ x¬≤</li>
                                        <li>‰ΩøÁî® / Ë°®Á§∫ÂàÜÊï∏Á∑ö</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                MathJax.typeset([questionContainer]);
                
                const inputField = document.getElementById(`answer-${currentQuestionIndex}`);
                const previewDiv = document.getElementById(`preview-${currentQuestionIndex}`);
                
                // ÂàùÂßãÂåñÈ†êË¶Ω
                if (userAnswers[currentQuestionIndex]) {
                    updatePreview(userAnswers[currentQuestionIndex], previewDiv);
                }

                // Á∂ÅÂÆöËôõÊì¨ÈçµÁõ§‰∫ã‰ª∂
                const keypadContainer = document.getElementById('virtual-keypad');
                keypadContainer.addEventListener('click', (e) => {
                    const btn = e.target.closest('.keypad-btn');
                    if (!btn) return;

                    let currentVal = inputField.value;
                    const val = btn.getAttribute('data-val');
                    const action = btn.getAttribute('data-action');

                    if (action === 'backspace') {
                        inputField.value = currentVal.slice(0, -1);
                    } else if (action === 'clear') {
                        inputField.value = '';
                    } else if (val) {
                        inputField.value = currentVal + val;
                    }

                    // Ëß∏ÁôºÊõ¥Êñ∞
                    const questionIndex = inputField.getAttribute('data-question');
                    updatePreview(inputField.value, previewDiv);
                    userAnswers[questionIndex] = inputField.value;
                    renderQuestionNav();
                });
            }
            
            function updatePreview(value, previewDiv) {
                if (!value) {
                    previewDiv.innerHTML = '<span class="preview-label">È†êË¶Ω</span>';
                    return;
                }
                let formattedValue = value;
                formattedValue = formattedValue.replace(/\^(\d+)/g, '^{$1}');
                formattedValue = formattedValue.replace(/\^-(\d+)/g, '^{-$1}');
                
                if (formattedValue.includes('/')) {
                    const parts = formattedValue.split('/');
                    if (parts.length === 2) {
                        formattedValue = '\\frac{' + parts[0] + '}{' + parts[1] + '}';
                    }
                }
                
                formattedValue = formattedValue.replace(/\*/g, '');
                formattedValue = formattedValue.replace(/\\times/g, '');
                formattedValue = formattedValue.replace(/\\cdot/g, '');
                
                previewDiv.innerHTML = '<span class="preview-label">È†êË¶Ω</span>\\(' + formattedValue + '\\)';
                MathJax.typeset([previewDiv]);
            }
            
            function showResults() {
                const quizContainer = document.getElementById('quiz-container');
                const resultsContainer = document.getElementById('results-container');
                const scoreElement = document.getElementById('score');
                const detailedResults = document.getElementById('detailed-results');
                
                let score = 0;
                questions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    if (checkAnswer(userAnswer, question.correctAnswers)) {
                        score++;
                    }
                });
                
                scoreElement.textContent = score;
                
                detailedResults.innerHTML = '';
                questions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = checkAnswer(userAnswer, question.correctAnswers);
                    
                    const resultCard = document.createElement('div');
                    resultCard.className = `result-card shadow-md ${isCorrect ? 'result-correct' : 'result-wrong'}`;
                    
                    let formattedUserAnswer = userAnswer || 'Êú™‰ΩúÁ≠î';
                    if (userAnswer) {
                        formattedUserAnswer = formattedUserAnswer.replace(/\^(\d+)/g, '^{$1}');
                        formattedUserAnswer = formattedUserAnswer.replace(/\^-(\d+)/g, '^{-$1}');
                        if (formattedUserAnswer.includes('/')) {
                            const parts = formattedUserAnswer.split('/');
                            if (parts.length === 2) {
                                formattedUserAnswer = '\\frac{' + parts[0] + '}{' + parts[1] + '}';
                            }
                        }
                    }
                    
                    resultCard.innerHTML = `
                        <div class="result-header">
                            <div class="flex items-center justify-between">
                                <h4 class="text-lg font-bold">Á¨¨ ${index + 1} È°å</h4>
                                <span class="font-medium">
                                    ${isCorrect ? '‚úì Ê≠£Á¢∫' : '‚úó ÈåØË™§'}
                                </span>
                            </div>
                        </div>
                        <div class="result-body">
                            <div class="mb-3">ÂåñÁ∞° \\(${question.question}\\)Ôºå‰∏¶‰ª•Ê≠£ÊåáÊï∏Ë°®Á§∫Á≠îÊ°à„ÄÇ</div>
                            <div class="mb-3">
                                <div class="result-label">‰Ω†ÁöÑÁ≠îÊ°à:</div>
                                <div class="result-answer">\\(${formattedUserAnswer}\\)</div>
                            </div>
                            <div class="mb-1">
                                <div class="result-label">Ê≠£Á¢∫Á≠îÊ°à (‰ª•Ê≠£ÊåáÊï∏Ë°®Á§∫):</div>
                                <div class="result-answer">\\(${question.answer}\\)</div>
                            </div>
                        </div>
                    `;
                    
                    detailedResults.appendChild(resultCard);
                });
                
                MathJax.typeset([detailedResults]);
                
                quizContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            }
            
            function initQuiz() {
                questions = generateQuestions();
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length).fill('');
                
                renderQuestionNav();
                renderCurrentQuestion();
            }
        });
    </script>
</body>
</html>